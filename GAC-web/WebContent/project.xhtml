<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jstl/core" 
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j">    
    <h:body>
    	<ui:composition template="/templates/layout.xhtml">
   	 		<ui:define name="title">
   	 		<f:event type="preRenderView" listener="#{projetMB.init}" />
				Projet : <h:outputText value="#{projetMB.name}" /> 
			</ui:define> 
    		<ui:define name="content">
    			<div class="container">
	    			<!-- YOUR CODE STARTS HERE -->
					   		   				
	    			<h:form id="formP">	
	    			Le projet <a4j:commandButton styleClass="btn span1 offset11" action="#{projetMB.toggleModif(true)}" value="Edit" render="formP"/>    
	    			<div class="row-fluid">
	    			<div class="well"> 	    				
		    			<ul>
		    				<li>Nom du projet : <h:outputText value="#{projetMB.name}" rendered="#{!projetMB.editable()}" />		    									
		    									<h:inputText value="#{projetMB.name}" rendered="#{projetMB.editable()}"/>
		    				</li>
		    				<li>Description : 	<h:outputText value="#{projetMB.description}" rendered="#{!projetMB.editable()}"/>
		    									<h:inputText value="#{projetMB.description}" rendered="#{projetMB.editable()}"/>
		    									
		    									<rich:select value="#{projetMB.manager}" rendered="#{projetMB.editable()}">
														<f:selectItems value="#{projetMB.employeeOptions}" />
					           			 		</rich:select>
		    				</li>
		    				<li>Manager du projet : <h:outputText value="#{projetMB.manager.firstname} " /> 
	    											<h:outputText value="#{projetMB.manager.lastname}" />		    				
	    					</li>
		    				<li>Budget alloué : <h:outputText value="#{projetMB.budget} €" rendered="#{!projetMB.editable()}"/>
	    										<h:inputText value="#{projetMB.budget}" rendered="#{projetMB.editable()}"/>
		    				</li>		    			
		    			</ul>
		    			</div>
		    			<h:commandButton value="Valider"  action="#{projetMB.validerModification()}"  styleClass="btn btn-success span2 offset1" rendered="#{projetMB.editable()}" />
						<h:commandButton value="Annuler"  action="#{projetMB.annulerModification()}"  styleClass="btn btn-danger span2 offset3" rendered="#{projetMB.editable()}" />
		    			</div>
			   		
			   		</h:form>   
			   		
			   		Avancement
			   		<div class="well">    				
	    				<div class="progress progress-striped active">
  								<div class="bar" style="width: #{projetMB.avancement}%;"></div>
						</div>
			   		</div>
			   		
			   		Mes activités
			   		<div class="well">    				
	    				<ui:repeat var="act" value="#{projetMB.myActiviyList}">
	    						<a class="btn btn-small btn-primary" href="projectActivity.xhtml?idActivity=#{act.idactivity}"><h:outputText value="#{act.description}" /></a>
	    					<blockquote>
	    						<ul class="unstyled">	    							
	    							<li>Charge : 		<h:outputText value="#{act.charge} Heures" /></li>
	    							<li>	    								
				    					Deadline : 		
				    					<h:outputText value="#{act.day}" >
				    						<f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm"/>
				    					</h:outputText>
	    							</li>
	    							<li>Status : 	    								        
											 <h:outputText rendered="#{act.estTermine == 1}" value="Terminé"/>									       
											 <h:outputText rendered="#{act.estTermine == 0}" value="Non Terminé"/>																	
	    							</li>	    							
	    						</ul>
		    					
		    					
	    					</blockquote>
	    					
	    				</ui:repeat>
			   		</div>
			   		
			   		Les autres activités
			   		<div class="well">    				
	    				<ui:repeat var="act" value="#{projetMB.otherActiviyList}">
	    					<a class="btn btn-small btn-primary" href="projectActivity.xhtml?idActivity=#{act.idactivity}"><h:outputText value="#{act.description}" /></a> 
	    					<blockquote>
	    						<ul class="unstyled">	    						
	    							<li>Charge : 		<h:outputText value="#{act.charge} Heures" /></li>
	    							<li>	    								
				    					Deadline : 		
				    					<h:outputText value="#{act.day}" >
				    						<f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm"/>
				    					</h:outputText>
	    							</li>
	    							<li>Status : 	    								        
											 <h:outputText rendered="#{act.estTermine == 1}" value="Terminé"/>									       
											 <h:outputText rendered="#{act.estTermine == 0}" value="Non Terminé"/>																	
	    							</li>
	    							<li>Associée à : 
	    								<a href="profile/profile.xhtml?user=#{act.employee.idemployee}"> 	    								        
											 <h:outputText value="#{act.employee.firstname} "/>									       
											 <h:outputText value="#{act.employee.lastname}"/>		
										 </a>															
	    							</li>
	    						</ul>
		    					
		    					
	    					</blockquote>
	    					
	    				</ui:repeat>

			   		</div>
			   		
			   		
	    		
	    			<!-- AND ENDS HERE  -->
        		</div>
    		</ui:define>
    	</ui:composition>
    </h:body>
</html>

